(function(){var t;t=angular.module("skinnyBlog",["ui.router"]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$provide",function(t,r,e,n){return e.html5Mode(!0),t.state("articles",{url:"^/",templateUrl:"partials/articles.html",controller:"ArticlesController as articles"}).state("tag",{url:"^/tag/:tag",templateUrl:"partials/articles.html",controller:"ArticlesController as articles"}).state("article",{url:"^/{year:[0-9]{4}}/{month:[0-9]{2}}/:title",templateUrl:"partials/article.html",controller:"ArticleController as article"}),n.decorator("$q",["$delegate",function(t){var r;return r=t.defer,t.defer=function(){var t;return t=r(),t.promise.success=function(r){return t.promise.then(r),t.promise},t.promise.error=function(r){return t.promise.then(null,r),t.promise},t},t}])}])}).call(this),function(){angular.module("skinnyBlog").factory("ApiService",["$http","$cacheFactory","$q",function(t,r,e){var n;return new(n=function(){function n(){this.cache=r("apiServiceCache")}return n.prototype.getArticles=function(){return this.cacheOrPerform("articles",function(r){return function(){var n;return n=e.defer(),t.get("/api/articles").success(function(t){return r.cacheArticles(t.articles),n.resolve(t)}).error(function(t){return n.reject(t)}),n.promise}}(this))},n.prototype.getArticlesWithTag=function(r){return this.cacheOrPerform("articles tag:"+r,function(n){return function(){var i;return i=e.defer(),t.get("/api/articles?tag="+r).success(function(t){return n.cacheArticles(t.articles),i.resolve(t)}).error(function(t){return i.reject(t)}),i.promise}}(this))},n.prototype.getArticle=function(r,e,n){var i;return null==e&&(e=null),null==n&&(n=null),i=null!==e&&null!==n?r+"/"+e+"/"+n:r,this.cacheOrPerform("article:"+i,function(){return t.get("/api/articles/"+i)})},n.prototype.cacheArticles=function(t){var r,n,i,c,l;for(l=[],i=0,c=t.length;c>i;i++)r=t[i],n=e.defer(),n.resolve({article:r}),l.push(this.cache.put("article:"+r.slug,n.promise));return l},n.prototype.cacheOrPerform=function(t,r){var e;return e=this.cache.get(t),void 0===e&&(e=r(),this.cache.put(t,e)),e},n}())}])}.call(this),function(){angular.module("skinnyBlog").controller("ArticleController",["$stateParams","ApiService",function(t,r){var e;return new(e=function(){function e(){r.getArticle(t.year,t.month,t.title).success(function(t){return function(r){return t.putArticleInScope(r.article)}}(this)).error(function(t){return console.log(t)})}return e.prototype.putArticleInScope=function(t){var r,e,n,i,c;for(r=["title","text","publishedDate","slugParts","tags"],c=[],n=0,i=r.length;i>n;n++)e=r[n],c.push(this[e]=t[e]);return c},e}())}])}.call(this),function(){angular.module("skinnyBlog").controller("ArticlesController",["$stateParams","ApiService",function(t,r){var e;return new(e=function(){function e(){var e;this.all=null,console.log(t),e=t.tag?(this.rawTag=t.tag,this.tag=t.tag.replace(/-/g," "),r.getArticlesWithTag(t.tag)):r.getArticles(),e.success(function(t){return function(r){return t.all=r.articles}}(this)).error(function(t){return function(){return t.all=!1}}(this))}return e}())}])}.call(this);
//# sourceMappingURL=app.min.js.map