(function(){var r;r=angular.module("skinnyBlog",["ui.router"]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$provide",function(r,t,e,n){return e.html5Mode(!0),r.state("articles",{url:"^/",templateUrl:"partials/articles.html",controller:"ArticlesController as articles"}).state("tag",{url:"^/tag/:tag",templateUrl:"partials/articles.html",controller:"ArticlesController as articles"}).state("article",{url:"^/{year:[0-9]{4}}/{month:[0-9]{2}}/:title",templateUrl:"partials/article.html",controller:"ArticleController as article"}),n.decorator("$q",["$delegate",function(r){var t;return t=r.defer,r.defer=function(){var r;return r=t(),r.promise.success=function(t){return r.promise.then(t),r.promise},r.promise.error=function(t){return r.promise.then(null,t),r.promise},r},r}])}]),r.directive("bhMarkdown",function(){return{restrict:"A",scope:{markdown:"&bhMarkdown"},link:function(r,t){return t.html(marked(r.markdown()))}}})}).call(this),function(){angular.module("skinnyBlog").factory("ApiService",["$http","$cacheFactory","$q",function(r,t,e){var n;return new(n=function(){function n(){this.cache=t("apiServiceCache")}return n.prototype.getArticles=function(){return this.cacheOrPerform("articles",function(t){return function(){var n;return n=e.defer(),r.get("/api/articles").success(function(r){return t.cacheArticles(r.articles),n.resolve(r)}).error(function(r){return n.reject(r)}),n.promise}}(this))},n.prototype.getArticlesWithTag=function(t){return this.cacheOrPerform("articles tag:"+t,function(n){return function(){var i;return i=e.defer(),r.get("/api/articles?tag="+t).success(function(r){return n.cacheArticles(r.articles),i.resolve(r)}).error(function(r){return i.reject(r)}),i.promise}}(this))},n.prototype.getArticle=function(t,e,n){var i;return null==e&&(e=null),null==n&&(n=null),i=null!==e&&null!==n?t+"/"+e+"/"+n:t,this.cacheOrPerform("article:"+i,function(){return r.get("/api/articles/"+i)})},n.prototype.cacheArticles=function(r){var t,n,i,c,l;for(l=[],i=0,c=r.length;c>i;i++)t=r[i],n=e.defer(),n.resolve({article:t}),l.push(this.cache.put("article:"+t.slug,n.promise));return l},n.prototype.cacheOrPerform=function(r,t){var e;return e=this.cache.get(r),void 0===e&&(e=t(),this.cache.put(r,e)),e},n}())}])}.call(this),function(){angular.module("skinnyBlog").controller("ArticleController",["$stateParams","ApiService",function(r,t){var e;return new(e=function(){function e(){t.getArticle(r.year,r.month,r.title).success(function(r){return function(t){return r.putArticleInScope(t.article)}}(this)).error(function(r){return console.log(r)})}return e.prototype.putArticleInScope=function(r){var t,e,n,i,c;for(t=["title","text","publishedDate","slugParts","tags"],c=[],n=0,i=t.length;i>n;n++)e=t[n],c.push(this[e]=r[e]);return c},e}())}])}.call(this),function(){angular.module("skinnyBlog").controller("ArticlesController",["$stateParams","ApiService",function(r,t){var e;return new(e=function(){function e(){var e;this.all=null,console.log(r),e=r.tag?(this.rawTag=r.tag,this.tag=r.tag.replace(/-/g," "),t.getArticlesWithTag(r.tag)):t.getArticles(),e.success(function(r){return function(t){return r.all=t.articles}}(this)).error(function(r){return function(){return r.all=!1}}(this))}return e}())}])}.call(this);
//# sourceMappingURL=app.min.js.map